<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ª± ƒêo√°n Kho·∫£n Vay - Student Project</title>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px; /* M·ªü r·ªông chi·ªÅu ngang ƒë·ªÉ ch·ª©a 2 c·ªôt */
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        /* --- LAYOUT CH√çNH: CHIA 2 C·ªòT --- */
        .main-layout {
            display: flex; /* K√≠ch ho·∫°t ch·∫ø ƒë·ªô chia c·ªôt */
            gap: 30px;     /* Kho·∫£ng c√°ch gi·ªØa 2 c·ªôt */
            align-items: flex-start; /* CƒÉn h√†ng ƒë·∫ßu ti√™n b·∫±ng nhau */
        }

        /* C·ªôt b√™n tr√°i: Ch·ª©a Form (Chi·∫øm 65%) */
        .left-column {
            flex: 65%;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        /* C·ªôt b√™n ph·∫£i: Ch·ª©a K·∫øt qu·∫£ (Chi·∫øm 35%) */
        .right-column {
            flex: 35%;
            /* Sticky: Gi√∫p c·ªôt n√†y lu√¥n b√°m theo khi cu·ªôn trang */
            position: sticky; 
            top: 20px; 
            height: fit-content;
        }

        /* CSS cho Form */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Chia 2 c·ªôt nh·ªè trong form */
            gap: 15px;
        }

        .form-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 14px; color: #34495e; }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box; 
        }

        input:focus, select:focus { border-color: #3498db; outline: none; }

        .btn-submit {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #2980b9;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }
        .btn-submit:hover { background-color: #2471a3; }

        /* CSS cho H·ªôp K·∫øt qu·∫£ */
        .result-box {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            border-top: 5px solid #27ae60; /* Vi·ªÅn xanh tr√™n ƒë·∫ßu */
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }
        
        .result-empty {
            background-color: #ecf0f1;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            color: #95a5a6;
            border: 2px dashed #bdc3c7;
        }

        .result-title { font-size: 18px; color: #7f8c8d; margin-bottom: 15px; }
        .result-value { font-size: 32px; color: #c0392b; font-weight: bold; margin: 10px 0; }
        .result-details { text-align: left; background: #f9f9f9; padding: 15px; border-radius: 5px; font-size: 13px; margin-top: 20px;}

        /* Hi·ªáu ·ª©ng hi·ªán d·∫ßn */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile: Khi m√†n h√¨nh nh·ªè th√¨ quay v·ªÅ x·∫øp ch·ªìng d·ªçc */
        @media (max-width: 768px) {
            .main-layout { flex-direction: column; }
            .left-column, .right-column { width: 100%; flex: 100%; }
            .right-column { position: static; order: -1; /* ƒê·∫©y k·∫øt qu·∫£ l√™n tr√™n c√πng mobile */ }
        }

        .footer { text-align: center; margin-top: 40px; font-size: 12px; color: #aaa; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üîç D·ª± ƒêo√°n Kho·∫£n Vay </h1>
        <p class="subtitle">S·ª≠ d·ª•ng thu·∫≠t to√°n Decision Tree Classifier (C√¢y quy·∫øt ƒë·ªãnh) ƒë·ªÉ ph√¢n t√≠ch h·ªì s∆° vay v·ªën </p>
        <p class="subtitle">Nh·∫≠p th√¥ng tin b√™n tr√°i - Xem k·∫øt qu·∫£ ngay b√™n ph·∫£i</p>

        <div class="main-layout">
            
            <div class="left-column">
                <form action="{{ url_for('Loan_Application') }}" method="POST">
                    <div class="form-grid">
                        
                        <div class="form-group">
                            <label>Gi·ªõi t√≠nh</label>
                            <select name="genders_type" required>
                                <option value="" disabled selected>-- Ch·ªçn --</option>
                                <option value="MALE">Nam</option>
                                <option value="FEMALE">N·ªØ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>T√¨nh tr·∫°ng h√¥n nh√¢n</label>
                            <select name="marital_status" required>
                                <option value="" disabled selected>-- Ch·ªçn --</option>
                                <option value="YES">ƒê√£ k·∫øt h√¥n</option>
                                <option value="NO">ƒê·ªôc th√¢n</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Tr√¨nh ƒë·ªô h·ªçc v·∫•n</label>
                            <select name="education_status" required>
                                <option value="" disabled selected>-- Ch·ªçn --</option>
                                <option value="GRADUATED">ƒê√£ t·ªët nghi·ªáp ƒêH</option>
                                <option value="NOT GRADUATED">Ch∆∞a t·ªët nghi·ªáp</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>S·ªë ng∆∞·ªùi ph·ª• thu·ªôc</label>
                            <select name="dependents" required>
                                <option value="0">0 ng∆∞·ªùi</option>
                                <option value="1">1 ng∆∞·ªùi</option>
                                <option value="2">2 ng∆∞·ªùi</option>
                                <option value="3+">Tr√™n 3 ng∆∞·ªùi</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>T·ª± kinh doanh</label>
                            <select name="self_employment" required>
                                <option value="NO">Kh√¥ng</option>
                                <option value="YES">C√≥</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Khu v·ª±c sinh s·ªëng</label>
                            <select name="property_area" required>
                                <option value="" disabled selected>-- Ch·ªçn --</option>
                                <option value="URBAN">Th√†nh th·ªã</option>
                                <option value="SEMIRURAL">B√°n n√¥ng th√¥n</option>
                                <option value="RURAL">N√¥ng th√¥n</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>L·ªãch s·ª≠ t√≠n d·ª•ng</label>
                            <select name="credit_history" required>
                                <option value="" disabled selected>-- Ch·ªçn --</option>
                                <option value="1">T·ªët (ƒê√£ tr·∫£ ƒë√∫ng h·∫°n)</option>
                                <option value="0">X·∫•u (T·ª´ng b√πng/tr·∫£ ch·∫≠m)</option>
                            </select>
                        </div>

                         <div class="form-group" style="grid-column: span 2;">
                            <hr style="border: 0; border-top: 1px solid #eee; margin: 10px 0;">
                            <label style="color: #2980b9;">Th√¥ng tin t√†i ch√≠nh:</label>
                        </div>

                        <div class="form-group">
                            <label>Thu nh·∫≠p b·∫£n th√¢n ($)</label>
                            <input type="number" name="applicantIncome" min="0" required placeholder="5000">
                        </div>

                        <div class="form-group">
                            <label>Thu nh·∫≠p ƒë·ªìng vay ($)</label>
                            <input type="number" name="coapplicantIncome" min="0" value="0" required>
                        </div>

                        <div class="form-group">
                            <label>S·ªë ti·ªÅn vay ($)</label>
                            <input type="number" name="loan_amnt" min="0" required placeholder="1000">
                        </div>

                        <div class="form-group">
                            <label>Th·ªùi h·∫°n (Ng√†y)</label>
                            <input type="number" name="term_d" value="360" min="0" required>
                        </div>

                    </div> <button type="submit" class="btn-submit">PH√ÇN T√çCH H·ªí S∆†</button>
                </form>
            </div>

            <div class="right-column">
                {% if result %}
                    <div class="result-box">
                        <div class="result-title">K·∫øt qu·∫£ Ph√¢n T√≠ch</div>
                        
                        <div class="result-value">
                            {{ result }}
                        </div>

                        <div class="result-details">
                            <strong>Th√¥ng s·ªë ƒë√£ nh·∫≠p:</strong><br>
                            {% for variable, value in original_input.items() %}
                                <span style="color:#666">- {{ variable }}: <b>{{ value }}</b></span><br>
                            {% endfor %}
                        </div>
                        
                        <a href="/" style="display:block; margin-top:20px; text-decoration:none; color:#2980b9; font-size:14px;">‚Ü∫ L√†m m·ªõi</a>
                    </div>
                {% else %}
                    <div class="result-empty">
                        <h2 style="font-size: 40px; margin: 0;">ü§ñ</h2>
                        <p><strong>Ch∆∞a c√≥ d·ªØ li·ªáu</strong></p>
                        <p style="font-size: 13px;">Vui l√≤ng ƒëi·ªÅn th√¥ng tin b√™n tr√°i v√† nh·∫•n n√∫t "Ph√¢n T√≠ch". AI s·∫Ω hi·ªÉn th·ªã k·∫øt qu·∫£ t·∫°i ƒë√¢y.</p>
                    </div>
                {% endif %}
            </div>

        </div> </div>

    <div class="footer">
        Student Project | Machine Learning Loan Prediction
    </div>

</body>
</html>